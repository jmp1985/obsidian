
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obsidian.oimp &#8212; Obsidian 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="obsidian.utils" href="obsidian.utils.html" />
    <link rel="prev" title="obsidian.learn" href="obsidian.learn.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="obsidian.utils.html" title="obsidian.utils"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="obsidian.learn.html" title="obsidian.learn"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Obsidian 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="obsidian.html" accesskey="U">obsidian package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="obsidian-oimp">
<h1>obsidian.oimp<a class="headerlink" href="#obsidian-oimp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-obsidian.oimp.oimp_main">
<span id="obsidian-oimp-oimp-main"></span><h3>obsidian.oimp.oimp_main<a class="headerlink" href="#module-obsidian.oimp.oimp_main" title="Permalink to this headline">¶</a></h3>
<p>Image processing main class for testing and developing
This module brings together the image processing and line extracion functions of obsidian. 
The directories containing files to be processed are taken
from user input (exactly how differs between main1 and main2) and the 
files are then passed through Processor and FeatureExtractor objects respectively, and the resulting
data dictionaries of form {imagepath:mean_profile_data} are saved to pickle files named with IDs</p>
<dl class="function">
<dt id="obsidian.oimp.oimp_main.get_img_dirs">
<code class="descclassname">obsidian.oimp.oimp_main.</code><code class="descname">get_img_dirs</code><span class="sig-paren">(</span><em>root</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.oimp_main.get_img_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk through root directory compiling a list of all bottom level directories
(that is directories that contain only files and no subdirectories)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>root</strong> (<em>str</em>) – directory to walk through</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary of image data directories with generated IDs based local directory tree</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obsidian.oimp.oimp_main.locate_background_file">
<code class="descclassname">obsidian.oimp.oimp_main.</code><code class="descname">locate_background_file</code><span class="sig-paren">(</span><em>img_data_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.oimp_main.locate_background_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Ascend img_dir until the first candidate for a background
file is found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>img_data_dir</strong> (<em>str</em>) – bottom directory of diffraction images</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">path to background file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obsidian.oimp.oimp_main.pipe">
<code class="descclassname">obsidian.oimp.oimp_main.</code><code class="descname">pipe</code><span class="sig-paren">(</span><em>top</em>, <em>dump_path</em>, <em>max_res</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.oimp_main.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a single top level directory as input and processes all nested files.
IDs are derived from directory paths. Background files are searched for in a bottom-up manner.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>top</strong> (<em>str</em>) – Top level directory containing all image files (which may be in several subdirectories)</li>
<li><strong>dump_path</strong> (<em>str</em>) – Directory to dump processed data into</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="obsidian.oimp.oimp_main.run">
<code class="descclassname">obsidian.oimp.oimp_main.</code><code class="descname">run</code><span class="sig-paren">(</span><em>argv</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.oimp_main.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-obsidian.oimp.processor">
<span id="obsidian-oimp-processor"></span><h3>obsidian.oimp.processor<a class="headerlink" href="#module-obsidian.oimp.processor" title="Permalink to this headline">¶</a></h3>
<p>Processor module for image processing</p>
<dl class="class">
<dt id="obsidian.oimp.processor.Processor">
<em class="property">class </em><code class="descclassname">obsidian.oimp.processor.</code><code class="descname">Processor</code><span class="sig-paren">(</span><em>coll</em>, <em>background=None</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.processor.Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulation of all image processing, to produce data that can be 
passed onto the feature extraction stage of Obsidian.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first simple">
<li><strong>processedData</strong> (<em>dict</em>) – storage dict for processed images / images to be 
processed in form {filepath : image array}</li>
<li><strong>bg</strong> (<em>array</em>) – background image data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first last"><strong>coll</strong> (<em>dict</em>) – dict of filepath : image pairs to be processed</p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="obsidian.oimp.processor.Processor.background">
<code class="descname">background</code><span class="sig-paren">(</span><em>bg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.processor.Processor.background" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove background from image collection</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>bg</strong> – Background image to be removed (provide only if not specified on instantiation)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">modified files</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsidian.oimp.processor.Processor.dump_save">
<code class="descname">dump_save</code><span class="sig-paren">(</span><em>ID</em>, <em>path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.processor.Processor.dump_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save processzed images to pickle file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ID</strong> (<em>str</em>) – identification label</li>
<li><strong>path</strong> (<em>str</em>) – destination path (if None, default is obsidian/datadump)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="obsidian.oimp.processor.Processor.rm_artifacts">
<code class="descname">rm_artifacts</code><span class="sig-paren">(</span><em>value=600</em><span class="sig-paren">)</span><a class="headerlink" href="#obsidian.oimp.processor.Processor.rm_artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Null pixel values above a reasonable photon count</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>int</em>) – cutoff value, pixels with higher counts assumed artifacts (default 600)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">obsidian.oimp</a><ul>
<li><a class="reference internal" href="#modules">Modules</a><ul>
<li><a class="reference internal" href="#module-obsidian.oimp.oimp_main">obsidian.oimp.oimp_main</a></li>
<li><a class="reference internal" href="#module-obsidian.oimp.processor">obsidian.oimp.processor</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="obsidian.learn.html"
                        title="previous chapter">obsidian.learn</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="obsidian.utils.html"
                        title="next chapter">obsidian.utils</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/obsidian.oimp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="obsidian.utils.html" title="obsidian.utils"
             >next</a> |</li>
        <li class="right" >
          <a href="obsidian.learn.html" title="obsidian.learn"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Obsidian 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="obsidian.html" >obsidian package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Fiona Young.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>